var i=class extends EventTarget{#t;constructor(t={}){super(),this.#t=Object.create(null),this.autoFire=t?.autoFire??!0,this.autoFocus=t?.autoFocus??!0,this.autoScroll=t?.autoScroll??!0,this.sensitive=t?.sensitive??!0}get routes(){return this.#t}get current(){return navigation.currentEntry}get history(){return navigation.entries()}back(){navigation.canGoBack&&navigation.back()}forward(){navigation.canGoForward&&navigation.forward()}navigate(t="/"){if(!(!(typeof t=="string"&&t.length>0)||!this.#t[t]))return navigation.navigate(t,{history:location.pathname===t?"replace":"auto"})}on(t,e){return(typeof t=="string"&&t.length>0||Number.isSafeInteger(t))&&typeof e=="function"&&(this.#t[t]=e),this}off(t){return delete this.#t[t],this}#e(t){let e=Object.create(null);if(this.sensitive===!0&&(e.handler=this.#t[t]),!e.handler)for(let[n,r]of Object.entries(this.#t)){let a=new URLPattern({pathname:n},{ignoreCase:this.sensitive===!1}).exec(t);if(a){e.handler=r,e.param=a.pathname.groups;break}else continue}return e.handler??=this.#t[404],e.param??={},e}listen(){return navigation.addEventListener("navigateerror",t=>{this.dispatchEvent(new CustomEvent("error",{detail:{error:t.message}}))}),navigation.addEventListener("navigate",t=>{if(!t.canIntercept||t.hashChange||t.downloadRequest!==null||t.formData)return;let e=new URL(t.destination.url),{handler:n,param:r}=this.#e(e.pathname);if(!n){this.dispatchEvent(new CustomEvent("error",{detail:{error:"No route handler found !"}}));return}this.dispatchEvent(new CustomEvent("will-navigate",{detail:{url:e}})),t.intercept({focusReset:this.autoFocus===!0?"after-transition":"manual",scroll:this.autoScroll===!0?"after-transition":"manual",handler:n.bind(this,t,e,r)})}),this.autoFire===!0&&this.navigate(),this}};export{i as Router};
