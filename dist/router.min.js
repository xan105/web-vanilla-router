var a=class extends EventTarget{#t;#e;constructor(t={}){super(),this.#t=Object.create(null),this.#e=Symbol("404"),this.autoFire=t?.autoFire??!0,this.autoFocus=t?.autoFocus??!0,this.autoScroll=t?.autoScroll??!0,this.sensitive=t?.sensitive??!0}get routes(){return Reflect.ownKeys(this.#t)}get current(){return navigation.currentEntry}get history(){return navigation.entries()}back(){navigation.canGoBack&&navigation.back()}forward(){navigation.canGoForward&&navigation.forward()}navigate(t="/"){if(typeof t=="string"&&t.length>0&&this.#t[t])return navigation.navigate(t,{history:location.pathname===t?"replace":"auto"})}on(t,e){return typeof e!="function"?this:(typeof t=="string"&&t.length>0?this.#t[t]=e:t===404&&(this.#t[this.#e]=e),this)}off(t){return typeof t=="string"&&t.length>0?delete this.#t[t]:t===404&&delete this.#t[this.#e],this}#n(t){let e=Object.create(null);if(this.sensitive===!0&&(e.handler=this.#t[t]),!e.handler)for(let[n,i]of Object.entries(this.#t)){let r=new URLPattern({pathname:n},{ignoreCase:this.sensitive===!1}).exec({pathname:t});if(r){e.handler=i,e.param=r.pathname.groups;break}else continue}return e.handler??=this.#t[this.#e],e.param??={},e}listen(){return navigation.addEventListener("navigateerror",t=>{this.dispatchEvent(new CustomEvent("error",{detail:{error:t.message}}))}),navigation.addEventListener("navigate",t=>{if(!t.canIntercept||t.hashChange||t.downloadRequest!==null||t.formData)return;let e=new URL(t.destination.url),{handler:n,param:i}=this.#n(e.pathname);if(!n){this.dispatchEvent(new CustomEvent("error",{detail:{error:"No handler found !"}}));return}this.dispatchEvent(new CustomEvent("will-navigate",{detail:{url:e}})),t.intercept({focusReset:this.autoFocus===!0?"after-transition":"manual",scroll:this.autoScroll===!0?"after-transition":"manual",handler:n.bind(this,t,e,i)})}),this.autoFire===!0&&this.navigate(),this}};export{a as Router};
