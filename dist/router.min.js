function d(){[...document.head.querySelectorAll('meta[property^="og:"]'),...document.head.querySelectorAll('meta[property^="article:"]'),...document.head.querySelectorAll('meta[property^="book:"]'),...document.head.querySelectorAll('meta[property^="profile:"]'),...document.head.querySelectorAll('meta[property^="video:"]'),...document.head.querySelectorAll('meta[property^="music:"]')].forEach(o=>document.head.removeChild(o))}function m(o){if(!Array.isArray(o))return;let t=["og: https://ogp.me/ns/#"];d();for(let{name:e,content:r,details:i}of o){switch(e){case"title":{document.title=r;break}case"description":{let n=document.head.querySelector(`meta[name="${e}"]`)??document.head.appendChild(document.createElement("meta"));n.setAttribute("name",e),n.setAttribute("content",r);break}case"type":{let n=`${r}: https://ogp.me/ns/${r}#`;t.push(n)}}let a=document.createElement("meta");a.setAttribute("property","og:"+e),a.setAttribute("content",r),document.head.appendChild(a);for(let[n,c]of Object.entries(i??{})){let s=document.createElement("meta");if(e==="type"){let[l]=r.split(".");s.setAttribute("property",l+":"+n)}else s.setAttribute("property","og:"+e+":"+n);s.setAttribute("content",c),document.head.appendChild(s)}}document.head.setAttribute("prefix",t.join(" "))}var u=class extends EventTarget{#t;#e;constructor(t={}){super(),this.#t=Object.create(null),this.#e=Symbol("404"),this.autoFire=t?.autoFire??!0,this.sensitive=t?.sensitive??!0,this.autoFocus=t?.autoFocus??!0,this.autoScroll=t?.autoScroll??!0,this.deferredCommit=t?.deferredCommit??!1}get routes(){return Reflect.ownKeys(this.#t)}get current(){return navigation.currentEntry}get history(){return navigation.entries()}back(){if(navigation.canGoBack)return navigation.back()}forward(){if(navigation.canGoForward)return navigation.forward()}navigate(t="/"){if(typeof t=="string"&&t.length>0&&this.#t[t])return navigation.navigate(t,{history:location.pathname===t?"replace":"auto"})}on(t,e,r={}){return typeof e!="function"?this:(typeof t=="string"&&t.length>0?this.#t[t]={handler:e,options:r}:t===404&&(this.#t[this.#e]={handler:e,options:r}),this)}off(t){return typeof t=="string"&&t.length>0?delete this.#t[t]:t===404&&delete this.#t[this.#e],this}#r(t){if(this.sensitive===!0&&Object.hasOwn(this.#t,t))return this.#t[t];for(let[e,{handler:r,options:i}]of Object.entries(this.#t)){let n=new URLPattern({pathname:e},{ignoreCase:this.sensitive===!1}).exec({pathname:t});if(n)return{handler:r,options:i,param:n.pathname.groups}}return this.#t[this.#e]}listen(){return navigation.addEventListener("navigateerror",t=>{let e=new URL(t.currentTarget.currentEntry.url);this.dispatchEvent(new CustomEvent("error",{detail:{error:t.message,url:e}}))}),navigation.addEventListener("navigatesuccess",t=>{let e=new URL(t.currentTarget.currentEntry.url);this.dispatchEvent(new CustomEvent("did-navigate",{detail:{url:e}}))}),navigation.addEventListener("navigate",t=>{if(!t.canIntercept||t.hashChange||t.downloadRequest!==null||t.formData)return;let e=new URL(t.destination.url),{handler:r,options:i,param:a}=this.#r(e.pathname)??{};if(!r){this.dispatchEvent(new CustomEvent("error",{detail:{error:"No handler found !",url:e}}));return}this.dispatchEvent(new CustomEvent("will-navigate",{detail:{url:e}})),t.intercept({focusReset:(i?.autoFocus??this.autoFocus)===!0?"after-transition":"manual",scroll:(i?.autoScroll??this.autoScroll)===!0?"after-transition":"manual",commit:(i?.deferredCommit??this.deferredCommit)===!0?"after-transition":"immediate",handler:r.bind(this,t,e,a??{})})}),this.autoFire===!0&&this.navigate(),this}};export{u as Router,m as updateMetadata};
