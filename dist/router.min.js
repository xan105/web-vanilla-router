var u=class{constructor(t={}){Object.defineProperty(this,"options",{value:{autoFocus:t.autoFocus??!0,autoScroll:t.autoScroll??!0},writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"routes",{value:Object.create(null),writable:!1,configurable:!1,enumerable:!0})}current(){return navigation.currentEntry}history(){return navigation.entries()}navigate(t="/"){if(!(!(typeof t=="string"&&t.length>0)||!this.routes[t]))return navigation.navigate(t,{history:location.pathname===t?"replace":"auto"})}on(t,n){return(typeof t=="string"&&t.length>0||typeof t=="number")&&typeof n=="function"&&(this.routes[t]=n),this}off(t){return delete this.routes[t],this}#t(t){return Object.keys(this.routes).filter(e=>e.includes(":")&&e.split("/").length===t.split("/").length).map(e=>({route:e,regex:new RegExp(e.replaceAll("/","/").replaceAll(/:(\w|\d)+/g,"(\\w|\\d)+"))})).find(({regex:e})=>e.test(t))?.route}listen(){navigation.addEventListener("navigate",t=>{if(!t.canIntercept||t.hashChange||t.downloadRequest!==null||t.formData)return;let n=new URL(t.destination.url),r=Object.create(null),e=this.routes[n.pathname];if(!e){let s=this.#t(n.pathname);if(s){let i=s.split("/"),o=n.pathname.split("/");if(o.length===i.length){let l=/:(\w|\d)+/;for(let[c,a]of i.entries())l.test(a)&&(r[a.slice(1)]=o[c])}}if(e=this.routes[s]??this.routes[404],!e)return}t.intercept({focusReset:this.options.autoFocus?"after-transition":"manual",scroll:this.options.autoScroll?"after-transition":"manual",handler:e.bind(this,t,n,r)})}),this.navigate()}};export{u as Router};
